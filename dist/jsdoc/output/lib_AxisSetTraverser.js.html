<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: lib/AxisSetTraverser.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: lib/AxisSetTraverser.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict';
import * as Utils from './Utils';
/**
 * Manages an {@link AxisSet}.
 * Performs the selection of hyperparameter values during the grid search.
 */
class AxisSetTraverser {
    /**
     * Creates an instance of AxisSetTraverser.
     * @param {AxisSet} _axisSet The collection of {@link Axis} that define the
     *							 grid (parameter space) to be searched. Each
     *							 axis is associated with one hyperparameter.
     */
    constructor(_axisSet) {
        this._axisSet = _axisSet;
        this._totalAxes = 0;
        this._traversed = false;
        this._iterationDescriptorsByIndex = {};
        this._totalIterations = 0;
        // save off our axis count, which never changes
        this._totalAxes = this._axisSet.GetTotalAxes();
        this._traversed = false;
        //NOTE: This function is buried in the c'tor because it actually runs the traversal (advances the axes).
        //		It cleans up after itself, resetting to a pristine state on the way out.
        this._iterationDescriptorsByIndex = {};
        this._totalIterations = 0;
        const BUILD_SCHEDULE = () => {
            let reportText = '';
            for (let i = 0; !this._traversed; ++i) {
                ++this._totalIterations;
                const DESCRIPTOR = this.WriteReport(true); // compact report
                this._iterationDescriptorsByIndex[i] = DESCRIPTOR;
                //TODO: (maybe) add a "x3" suffix to this printout; needs 'repetitions' from the owner.
                //		...could make more sense to factor this out of the constructor. The protection of the 'running' state seems misplaced.
                reportText += DESCRIPTOR + '\n';
                this.Advance();
            }
            console.log('iteration schedule:' + '\n' + reportText);
            // reset for traversals managed by the owner
            this._traversed = false;
        };
        BUILD_SCHEDULE();
    }
    get totalIterations() { return this._totalIterations; }
    get traversed() { return this._traversed; }
    /**
     * Iterates the grid. Called after each 'cell' (i.e. unique
     * combination of hyperparameters) is trained and tested. Once all axes
     * are complete, we mark ourselves as traversed (or done).
     */
    Advance() {
        Utils.Assert(!this._traversed);
        let resetCounter = 0;
        for (let i = 0; i &lt; this._totalAxes; ++i) {
            this._axisSet.AdvanceAxis(i);
            if (this._axisSet.CheckAxisComplete(i)) {
                this._axisSet.ResetAxis(i);
                //KEEP: This is useful, but currently too spammy (without digging out the axis name, it's also too vague).
                //		There's a decent chance this comes back after the first round of user feedback.
                //				console.log('Axis ' + i + ' reset');
                ++resetCounter;
                continue;
            }
            return;
        }
        Utils.Assert(resetCounter === this._totalAxes);
        // this advance completed the traversal; reset
        this._traversed = true;
    }
    /**
     * Produces a simple key: value mapping of the axes current positions,
     * keyed by their names.
     * @return {StringKeyedNumbersObject}
     */
    CreateIterationParams() {
        return this._axisSet.CreateParams();
    }
    /**
     * Traverses the axis set, invoking a callback with the name of each axis.
     * @param {function(string): void} callback The function to be invoked.
     */
    ExamineAxisNames(callback) {
        this._axisSet.Walk((axis) => {
            callback(axis.typeName);
        });
    }
    /**
     * Gets the descriptor for a requested axis. We build these simple strings
     * in the constructor.
     * @param {number} index The axis to be described.
     * @return {string}
     */
    LookupIterationDescriptor(index) {
        if (this._iterationDescriptorsByIndex[index] === undefined) {
            throw new Error('Attempted to lookup descriptor for unknown iteration: ' + index);
        }
        return this._iterationDescriptorsByIndex[index];
    }
    /**
     * Gets a combined report of every axis' status.
     * @param {boolean} compact Whether to get a detailed report.
     * @return {string}
     */
    WriteReport(compact) {
        let reportText = '';
        for (let i = 0; i &lt; this._totalAxes; ++i) {
            reportText += (compact ? '' : 'â€¢ ')
                + this._axisSet.WriteAxisReport(i, compact)
                + (compact ? ', ' : '\n');
        }
        // remove the trailing newline or comma-and-space
        reportText = reportText.slice(0, (compact ? -2 : -1));
        return reportText;
    }
}
Object.freeze(AxisSetTraverser);
export { AxisSetTraverser };
//# sourceMappingURL=AxisSetTraverser.js.map</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-FileIO.html">FileIO</a></li><li><a href="module-main.html">main</a></li><li><a href="module-Utils.html">Utils</a></li></ul><h3>Classes</h3><ul><li><a href="Axis.html">Axis</a></li><li><a href="AxisSet.html">AxisSet</a></li><li><a href="AxisSetTraverser.html">AxisSetTraverser</a></li><li><a href="DataSet.html">DataSet</a></li><li><a href="DataSetFetcher.html">DataSetFetcher</a></li><li><a href="EpochStats.html">EpochStats</a></li><li><a href="ExponentialProgression.html">ExponentialProgression</a></li><li><a href="FailureMessage.html">FailureMessage</a></li><li><a href="FibonacciProgression.html">FibonacciProgression</a></li><li><a href="FileIOResult.html">FileIOResult</a></li><li><a href="Grid.html">Grid</a></li><li><a href="GridOptions.html">GridOptions</a></li><li><a href="GridRunStats.html">GridRunStats</a></li><li><a href="IterationResult.html">IterationResult</a></li><li><a href="LinearProgression.html">LinearProgression</a></li><li><a href="ModelParams.html">ModelParams</a></li><li><a href="ModelStatics.html">ModelStatics</a></li><li><a href="ModelTestStats.html">ModelTestStats</a></li><li><a href="PredictionEvaluation.html">PredictionEvaluation</a></li><li><a href="Progression.html">Progression</a></li><li><a href="SessionData.html">SessionData</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a>
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
